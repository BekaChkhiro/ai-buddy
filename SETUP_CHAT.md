# Chat Interface Setup Guide

## РюЁ рЃЏрЃЮрЃЊрЃћрЃџрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃћрЃЉрЃў рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃБрЃџрЃўрЃљ

Claude API-рЃўрЃА рЃЏрЃЮрЃЊрЃћрЃџрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃћрЃЉрЃў рЃњрЃљрЃАрЃгрЃЮрЃарЃћрЃЉрЃБрЃџрЃўрЃљ рЃЌрЃљрЃарЃўрЃдрЃўрЃљрЃюрЃў рЃЋрЃћрЃарЃАрЃўрЃћрЃЉрЃўрЃЌ:

```typescript
DEFAULT_MODEL = 'claude-3-5-sonnet-20241022'  // Sonnet 3.5 (October 2024)
FAST_MODEL = 'claude-3-5-haiku-20241022'      // Haiku 3.5 (October 2024)
PREMIUM_MODEL = 'claude-3-opus-20240229'      // Opus 3
```

Рџа№ИЈ **рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў:** `-latest` рЃљрЃџрЃўрЃљрЃАрЃћрЃЉрЃў рЃљрЃа рЃљрЃарЃўрЃА рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃўрЃџрЃў Anthropic API-рЃА рЃЏрЃўрЃћрЃа, рЃљрЃЏрЃўрЃбрЃЮрЃЏ рЃЋрЃўрЃДрЃћрЃюрЃћрЃЉрЃЌ рЃЌрЃљрЃарЃўрЃдрЃўрЃљрЃю рЃЋрЃћрЃарЃАрЃўрЃћрЃЉрЃА.

## ­ЪћЉ рЃАрЃљрЃГрЃўрЃарЃЮ рЃюрЃљрЃЉрЃўрЃ»рЃћрЃЉрЃў

### 1. Anthropic API Key-рЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ

**рЃЊрЃљрЃљрЃЎрЃЮрЃърЃўрЃарЃћрЃЌ рЃЌрЃЦрЃЋрЃћрЃюрЃў API рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃў:**

1. рЃњрЃљрЃЊрЃљрЃЊрЃўрЃЌ: https://console.anthropic.com/settings/keys
2. рЃерЃћрЃЦрЃЏрЃћрЃюрЃўрЃЌ рЃљрЃ«рЃљрЃџрЃў API Key (рЃЌрЃБ рЃљрЃа рЃњрЃљрЃЦрЃЋрЃЌ)
3. рЃЊрЃљрЃљрЃЎрЃЮрЃърЃўрЃарЃћрЃЌ рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃў

**рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћрЃЌ .env.local рЃцрЃљрЃўрЃџрЃерЃў:**

```bash
# рЃцрЃљрЃўрЃџрЃў: .env.local
ANTHROPIC_API_KEY=sk-ant-api03-xxxxxxxxxxxxxxxxx
```

Рџа№ИЈ **р▓Фр▓љр▓џр▓ўр▓љр▓ю рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў:**
1. рЃњрЃљрЃ«рЃАрЃћрЃюрЃўрЃЌ `.env.local` рЃцрЃљрЃўрЃџрЃў рЃарЃћрЃЊрЃљрЃЦрЃбрЃЮрЃарЃерЃў
2. рЃўрЃърЃЮрЃЋрЃћрЃЌ рЃ«рЃљрЃќрЃў: `ANTHROPIC_API_KEY=your-api-key-here`
3. рЃерЃћрЃфрЃЋрЃљрЃџрЃћрЃЌ `your-api-key-here` рЃЌрЃЦрЃЋрЃћрЃюрЃў рЃарЃћрЃљрЃџрЃБрЃарЃў API рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃўрЃЌ (рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃўрЃгрЃДрЃћрЃЉрЃљ `sk-ant-api03-...`)
4. рЃерЃћрЃўрЃюрЃљрЃ«рЃћрЃЌ рЃцрЃљрЃўрЃџрЃў
5. рЃњрЃљрЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃћрЃЌ Next.js dev server (Ctrl+C, рЃерЃћрЃЏрЃЊрЃћрЃњ `npm run dev`)

### 2. Database Migration-рЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ

Chat-рЃўрЃАрЃЌрЃЋрЃўрЃА рЃАрЃљрЃГрЃўрЃарЃЮрЃљ `conversations` рЃЊрЃљ `messages` рЃфрЃ«рЃарЃўрЃџрЃћрЃЉрЃў:

```bash
# Supabase migration-рЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ
supabase migration up

# TypeScript types-рЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ
npx supabase gen types typescript --local > src/lib/supabase/database.types.ts
```

рЃљрЃю рЃЌрЃБ Supabase Cloud рЃўрЃДрЃћрЃюрЃћрЃЉрЃЌ:

```bash
# Push migration to cloud
supabase db push

# Generate types from cloud
npx supabase gen types typescript --project-id your-project-id > src/lib/supabase/database.types.ts
```

### 3. Development Server-рЃўрЃА рЃњрЃљрЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ

```bash
# рЃњрЃљрЃЕрЃћрЃарЃћрЃЌ рЃАрЃћрЃарЃЋрЃћрЃарЃў (Ctrl+C)
# рЃњрЃљрЃБрЃерЃЋрЃўрЃЌ рЃ«рЃћрЃџрЃљрЃ«рЃџрЃљ
npm run dev
```

### 4. Chat-рЃўрЃА рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃљ

1. рЃњрЃљрЃЊрЃљрЃЊрЃўрЃЌ: http://localhost:3000/chat
2. рЃљрЃўрЃарЃЕрЃўрЃћрЃЌ рЃърЃарЃЮрЃћрЃЦрЃбрЃў dropdown-рЃЊрЃљрЃю
3. рЃњрЃљрЃЏрЃЮрЃњрЃќрЃљрЃЋрЃюрЃћрЃЌ рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљ
4. рЃЊрЃљрЃћрЃџрЃЮрЃЊрЃћрЃЌ AI-рЃА streaming рЃърЃљрЃАрЃБрЃ«рЃА

## ­Ъј» рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃў рЃЏрЃЮрЃЊрЃћрЃџрЃћрЃЉрЃў

| Model | Description | Input Price | Output Price |
|-------|-------------|-------------|--------------|
| `claude-3-5-sonnet-latest` | рЃБрЃљрЃ«рЃџрЃћрЃАрЃў Sonnet (Default) | $3/M tokens | $15/M tokens |
| `claude-3-5-haiku-latest` | рЃАрЃгрЃарЃљрЃцрЃў рЃЊрЃљ рЃўрЃљрЃцрЃў | $1/M tokens | $5/M tokens |
| `claude-3-opus-latest` | рЃърЃарЃћрЃЏрЃўрЃБрЃЏ рЃ«рЃљрЃарЃўрЃАрЃ«рЃў | $15/M tokens | $75/M tokens |

## ­ЪЊЮ рЃерЃћрЃфрЃЊрЃЮрЃЏрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃњрЃЋрЃљрЃарЃћрЃЉрЃљ

### рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: "model not found"
**рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃљ:** рЃЊрЃљрЃарЃгрЃЏрЃБрЃюрЃЊрЃўрЃЌ, рЃарЃЮрЃЏ рЃЌрЃЦрЃЋрЃћрЃю рЃњрЃљрЃЦрЃЋрЃЌ access `-latest` рЃЏрЃЮрЃЊрЃћрЃџрЃћрЃЉрЃќрЃћ. рЃЌрЃБ рЃљрЃарЃљ, рЃерЃћрЃфрЃЋрЃљрЃџрЃћрЃЌ:
```typescript
// src/lib/claude/config.ts
export const DEFAULT_MODEL: ClaudeModel = 'claude-3-5-sonnet-20240620'
```

### рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: "ANTHROPIC_API_KEY is not set"
**рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃљ:** рЃЊрЃљрЃарЃгрЃЏрЃБрЃюрЃЊрЃўрЃЌ, рЃарЃЮрЃЏ `.env.local` рЃцрЃљрЃўрЃџрЃерЃў рЃАрЃгрЃЮрЃарЃљрЃЊ рЃљрЃарЃўрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў API key:
```bash
ANTHROPIC_API_KEY=sk-ant-api03-...  # рЃЌрЃЦрЃЋрЃћрЃюрЃў рЃарЃћрЃљрЃџрЃБрЃарЃў key
```

### рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: "conversations table not found"
**рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃљ:** рЃњрЃљрЃБрЃерЃЋрЃўрЃЌ database migration:
```bash
supabase migration up
```

### рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ: TypeScript errors
**рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃљ:** рЃњрЃљрЃюрЃљрЃљрЃ«рЃџрЃћрЃЌ Supabase types:
```bash
npx supabase gen types typescript --local > src/lib/supabase/database.types.ts
```

## ­Ъџђ Chat-рЃўрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў

### РюЁ рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў Streaming
- Progressive AI рЃърЃљрЃАрЃБрЃ«рЃћрЃЉрЃў
- Stop Streaming рЃдрЃўрЃџрЃљрЃЎрЃў
- рЃљрЃюрЃўрЃЏрЃўрЃарЃћрЃЉрЃБрЃџрЃў cursor

### РюЁ Markdown & Code
- Syntax highlighting (100+ рЃћрЃюрЃљ)
- Copy code рЃдрЃўрЃџрЃљрЃЎрЃў
- Math equations (KaTeX)
- Tables, Lists, Links

### РюЁ Conversation Management
- рЃљрЃ«рЃљрЃџрЃў рЃАрЃљрЃБрЃЉрЃарЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ
- рЃАрЃљрЃБрЃЉрЃарЃћрЃЉрЃўрЃА рЃњрЃљрЃЊрЃљрЃарЃЌрЃЋрЃљ
- рЃАрЃљрЃБрЃЉрЃарЃћрЃЉрЃўрЃА рЃгрЃљрЃерЃџрЃљ
- рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃАрЃљрЃЌрЃљрЃБрЃарЃћрЃЉрЃў

### РюЁ 4 AI рЃарЃћрЃЪрЃўрЃЏрЃў
1. **Planning** - рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃЊрЃљрЃњрЃћрЃњрЃЏрЃЋрЃљ
2. **Implementation** - рЃЎрЃЮрЃЊрЃўрЃА рЃЊрЃљрЃгрЃћрЃарЃљ
3. **Review** - рЃЎрЃЮрЃЊрЃўрЃА рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ
4. **General** - рЃќрЃЮрЃњрЃљрЃЊрЃў рЃЊрЃљрЃ«рЃЏрЃљрЃарЃћрЃЉрЃљ

### РюЁ Quick Actions
- Plan Feature
- Write Code
- Review Code
- Debug Issue
- Improve Code
- Add Tests

### РюЁ Keyboard Shortcuts
- `Ctrl/Cmd + N` - рЃљрЃ«рЃљрЃџрЃў рЃАрЃљрЃБрЃЉрЃљрЃарЃў
- `Enter` - рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃўрЃА рЃњрЃљрЃњрЃќрЃљрЃЋрЃюрЃљ
- `Shift + Enter` - рЃљрЃ«рЃљрЃџрЃў рЃ«рЃљрЃќрЃў
- `Escape` - рЃњрЃљрЃАрЃБрЃцрЃЌрЃљрЃЋрЃћрЃЉрЃљ
- `/` - Input-рЃќрЃћ рЃцрЃЮрЃЎрЃБрЃАрЃўрЃарЃћрЃЉрЃљ

## ­ЪЊі Token Usage Tracking

Chat рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃљрЃњрЃарЃЮрЃЋрЃћрЃЉрЃА statistics:
- рЃ»рЃљрЃЏрЃБрЃарЃў tokens (input/output)
- рЃЌрЃљрЃюрЃ«рЃљ USD-рЃерЃў
- рЃАрЃљрЃерЃБрЃљрЃџрЃЮ tokens рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃљрЃќрЃћ
- рЃЏрЃЮрЃЊрЃћрЃџрЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃљ

## ­Ъћљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ

РюЁ **рЃарЃћрЃљрЃџрЃўрЃќрЃћрЃЉрЃБрЃџрЃў:**
- Row Level Security (RLS)
- User authentication
- Project ownership verification
- API key encryption
- Input sanitization

## ­ЪњА Tips

1. **рЃЉрЃўрЃБрЃ»рЃћрЃбрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ:**
   - рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЌ Haiku рЃўрЃљрЃцрЃў рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
   - рЃерЃћрЃќрЃдрЃБрЃЊрЃћрЃЌ context files рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ
   - рЃЊрЃљрЃљрЃДрЃћрЃюрЃћрЃЌ usage limits

2. **рЃБрЃЎрЃћрЃЌрЃћрЃАрЃў рЃърЃљрЃАрЃБрЃ«рЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА:**
   - рЃўрЃДрЃљрЃЋрЃўрЃЌ рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃћрЃЉрЃў prompt-рЃћрЃЉрЃерЃў
   - рЃЏрЃўрЃБрЃЌрЃўрЃЌрЃћрЃЌ context files
   - рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЌ рЃАрЃгрЃЮрЃарЃў mode (Planning/Implementation/Review)

3. **Performance:**
   - Chat рЃърЃљрЃАрЃБрЃ«рЃЮрЃЉрЃА real-time
   - Conversations рЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ Supabase-рЃерЃў
   - Auto-scroll рЃГрЃЎрЃЋрЃўрЃљрЃюрЃБрЃарЃљрЃЊ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА

## ­ЪЊџ рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌрЃў рЃарЃћрЃАрЃБрЃарЃАрЃћрЃЉрЃў

- [Claude API Documentation](https://docs.anthropic.com/)
- [Anthropic Pricing](https://www.anthropic.com/pricing)
- [CHAT_IMPLEMENTATION_COMPLETE.md](./CHAT_IMPLEMENTATION_COMPLETE.md)
- [CHAT_ACCESSIBILITY.md](./CHAT_ACCESSIBILITY.md)

---

**рЃЏрЃќрЃљрЃЊрЃљрЃљ!** ­ЪјЅ Chat interface рЃАрЃарЃБрЃџрЃљрЃЊ рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃБрЃарЃўрЃљ. рЃБрЃЉрЃарЃљрЃџрЃЮрЃЊ рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћрЃЌ API key рЃЊрЃљ рЃўрЃАрЃўрЃљрЃЏрЃЮрЃЋрЃюрЃћрЃЌ!
